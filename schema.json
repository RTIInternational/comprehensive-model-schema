{
  "$schema": "http://json-schema.org/draft-04/schema",
  "id": "schema.json",
  "description": "Configuration for the Comprehensive Diabetes Model",
  "required": [
    "scenario_name",
    "time_horizon",
    "population",
    "equation_set",
    "economics"
  ],
  "type": "object",
  "ui:layout": {
    "pages": [
      {
        "url_path": "/",
        "title": "New Scenario Setup",
        "fieldsets": [
          {
            "$ref": "#/properties/diabetes_type",
            "update_on_change": true
          }
        ]
      },
      {
        "title": "Scenario Setup: Basic - Type 1 Diabetes",
        "url_path": "/basic-setup-for-type-1-diabetes",
        "expand_if": {
          "diabetes_type": "Type 1"
        },
        "fieldsets": [
          [ 
            { "$ref": "#/properties/scenario_name"},
            { "$ref": "#/properties/equation_set" },
            {
              "$ref": "#/properties/simulation_type",
              "update_on_change": true
            },
            {
              "$ref": "#/properties/intervention_sets",
              "expand_if": {
                "simulation_type": "Standard"
              }
            },
            {
              "$ref": "#/properties/iterations",
              "expand_if": {
                "simulation_type": "Sensitivity Analysis"
              }
            },
            { "$ref": "#/properties/seed" }
          ],
          [
            { "$ref": "#/properties/population" },
            { "$ref": "#/properties/time_horizon" }
          ]
        ]
      },
      {
        "title": "Scenario Setup: Basic - Type 2 Diabetes",
        "url_path": "/basic-setup-for-type-2-diabetes",
        "expand_if": {
          "diabetes_type": "Type 2"
        },
        "fieldsets": [
          [ 
            { "$ref": "#/properties/scenario_name"},
            { "$ref": "#/properties/equation_set" },
            {
              "$ref": "#/properties/simulation_type",
              "update_on_change": true
            },
            {
              "$ref": "#/properties/intervention_sets",
              "expand_if": {
                "simulation_type": "Standard"
              }
            },
            {
              "$ref": "#/properties/iterations",
              "expand_if": {
                "simulation_type": "Sensitivity Analysis"
              }
            },
            { "$ref": "#/properties/seed" }
          ],
          [
            { "$ref": "#/properties/population" },
            { "$ref": "#/properties/time_horizon" }
          ]
        ]
      },
      {
        "title": "Scenario Setup: Basic - Prediabetes",
        "url_path": "/basic-setup-for-prediabetes",
        "expand_if": {
          "diabetes_type": "Prediabetes"
        },
        "fieldsets": [
          [ 
            { "$ref": "#/properties/scenario_name"},
            { "$ref": "#/properties/equation_set" },
            {
              "$ref": "#/properties/simulation_type",
              "update_on_change": true
            },
            {
              "$ref": "#/properties/intervention_sets",
              "expand_if": {
                "simulation_type": "Standard"
              }
            },
            {
              "$ref": "#/properties/iterations",
              "expand_if": {
                "simulation_type": "Sensitivity Analysis"
              }
            },
            { "$ref": "#/properties/seed" }
          ],
          [
            { "$ref": "#/properties/population" },
            { "$ref": "#/properties/time_horizon" }
          ]
        ]
      },
      {
        "title": "Advanced Setup: Population Generation - Type 1 Diabetes",
        "url_path": "/population-generation-for-type-1-diabetes",
        "expand_if": {"diabetes_type": "Type 1"},
        "fieldsets": [
          {
            "$ref": "#/properties/demographics",
            "items_length": "intervention_sets",
            "max_items_length": 1,
            "update_on_change": true,
            "expand_if": {
              "diabetes_type": "Type 1"
            }
          },
          {
            "$ref": "#/properties/clinical_history",
            "items_length": "intervention_sets",
            "max_items_length": 1,
            "update_on_change": true,
            "expand_if": {
              "diabetes_type": "Type 1"
            }
          }
        ]
      },
      {
        "title": "Advanced Setup: Economic Factors - Type 1 Diabetes",
        "url_path": "/economic-factors-for-type-1-diabetes",
        "expand_if": {"diabetes_type": "Type 1"},
        "fieldsets": [
          {
            "$ref": "#/properties/first_disutilities",
            "items_length": "intervention_sets",
            "max_items_length": 1,
            "update_on_change": true,
            "expand_if": {
              "diabetes_type": "Type 1"
            }
          },
          {
            "$ref": "#/properties/subsequent_disutilities",
            "items_length": "intervention_sets",
            "max_items_length": 1,
            "update_on_change": true,
            "expand_if": {
              "diabetes_type": "Type 1"
            }
          },
          {
            "$ref": "#/properties/event_cost",
            "items_length": "intervention_sets",
            "max_items_length": 1,
            "update_on_change": true,
            "expand_if": {
              "diabetes_type": "Type 1"
            }
          },
          {
            "$ref": "#/properties/maintenance_cost",
            "items_length": "intervention_sets",
            "max_items_length": 1,
            "update_on_change": true,
            "expand_if": {
              "diabetes_type": "Type 1"
            }
          }
        ]
      },
      {
        "title": "Scenario Setup: Intervention Sets",
        "url_path": "/intervention-sets-config",
        "expand_if": {
          "simulation_type": "Standard"
        },
        "fieldsets": [
          {
            "$ref": "#/properties/intervention_sets_ukpds",
            "items_length": "intervention_sets",
            "max_items_length": 10,
            "expand_if": {
              "equation_set": "ukpds"
            }
          },
          {
            "$ref": "#/properties/intervention_sets_t1d",
            "items_length": "intervention_sets",
            "max_items_length": 10,
            "expand_if": {
              "equation_set": "t1d"
            }
          }
        ]
      },
      {
        "title": "Scenario Setup: Sensitivity Analysis",
        "url_path": "/sensitivity-analysis-config",
        "expand_if": {
          "simulation_type": "Sensitivity Analysis"
        },
        "fieldsets": [
          {
            "$ref": "#/properties/sensitivity_analysis_ukpds",
            "update_on_change": true,
            "expand_if": {
              "equation_set": "ukpds"
            }
          },
          {
            "$ref": "#/properties/sensitivity_analysis_t1d",
            "update_on_change": true,
            "expand_if": {
              "equation_set": "t1d"
            }
          }
        ]
      },
      {
        "url_path": "/summary",
        "built_in_page": {
          "type": "summary",
          "title": "Scenario Summary",
          "message": "Data as it will be sent to the simulator.",
          "button_text": "Finish Form"
        }
      }
    ]
  },
  "properties": {
    "diabetes_type": {
      "title": "Diabetes Type",
      "description": "",
      "$ref": "#/definitions/string",
      "enum": ["Type 1", "Type 2", "Prediabetes"],
      "default": "Type 1"
    },
    "seed": {
      "description": "6 digit simulation seed",
      "$ref": "#/definitions/positiveInteger",
      "ui:schema": {
        "ui:widget": "hidden"
      },
      "default": 123456
    },
    "demographics": {
      "title": "Demographics",
      "ui:schema": {
        "ui:field_type": "accordion",
        "ui:options": {
          "orderable": false,
          "addable": false
        },
        "items": {
          "ui:options": {
            "header_buttons": {
              "common_text": "Demographics",
              "numbered": ""
            }
          },
          "baseline_demographics": {
            "ui:field_type": "grid"
          },
          "risk_factors": {
            "ui:field_type": "grid"
          }
        }
      },
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "baseline_demographics": {
            "title": "Baseline Demographics",
            "type": "object",
            "properties": {
              "age": {
                "$ref": "#/definitions/positiveInteger"
              },
              "age (mean)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "age (SD)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "% of females": {
                "$ref": "#/definitions/percent"
              },
              "% of females (mean)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "% of females (SD)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "duration of diabetes": {
                "$ref": "#/definitions/positiveInteger"
              },
              "duration of diabetes (mean)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "duration of diabetes (SD)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "proportion white": {
                "$ref": "#/definitions/percent"
              },
              "proportion white (mean)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "proportion white (SD)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "proportion black": {
                "$ref": "#/definitions/percent"
              },
              "proportion black (mean)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "proportion black (SD)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "proportion hispanic": {
                "$ref": "#/definitions/percent"
              },
              "proportion hispanic (mean)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "proportion hispanic (SD)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "proportion others": {
                "$ref": "#/definitions/percent"
              },
              "proportion others (mean)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "proportion others (SD)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "proportion smokers": {
                "$ref": "#/definitions/percent"
              },
              "proportion smokers (mean)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "proportion smokers (SD)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "proportion above GED": {
                "$ref": "#/definitions/percent"
              },
              "proportion above GED (mean)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "proportion above GED (SD)": {
                "$ref": "#/definitions/positiveInteger"
              }
            }
          },
          "risk_factors": {
            "title": "Diabetes Risk Factors",
            "type": "object",
            "properties": {
              "% HbA1c": {
                "$ref": "#/definitions/percent"
              },
              "% HbA1c (mean)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "% HbA1c (SD)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "LDL Cholesterol (mg/dl)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "LDL Cholesterol (mg/dl) (mean)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "LDL Cholesterol (mg/dl) (SD)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "HDL Cholesterol (mg/dl)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "HDL Cholesterol (mg/dl) (mean)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "HDL Cholesterol (mg/dl) (SD)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "Tryglycerides (mg/dl)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "Tryglycerides (mg/dl) (mean)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "Tryglycerides (mg/dl) (SD)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "BMI": {
                "$ref": "#/definitions/positiveInteger"
              },
              "BMI (mean)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "BMI (SD)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "Serum Creatine": {
                "$ref": "#/definitions/positiveInteger"
              },
              "Serum Creatine (mean)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "Serum Creatine (SD)": {
                "$ref": "#/definitions/positiveInteger"
              }
            }
          }
        }
      }
    },
    "clinical_history": {
      "title": "Clinical History",
      "ui:schema": {
        "ui:field_type": "accordion",
        "ui:options": {
          "orderable": false,
          "addable": false
        },
        "items": {
          "ui:options": {
            "header_buttons": {
              "common_text": "Clinical History",
              "numbered": ""
            }
          },
          "history": {
            "ui:field_type": "grid"
          }
        }
      },
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "history": {
            "title": "Clinical History",
            "type": "object",
            "properties": {
              "Proportion previous MI": {
                "$ref": "#/definitions/percent"
              },
              "Proportion previous smokers": {
                "$ref": "#/definitions/percent"
              },
              "Proportion previous angina": {
                "$ref": "#/definitions/percent"
              },
              "Proportion previous revascular": {
                "$ref": "#/definitions/percent"
              },
              "Proportion previous CHF": {
                "$ref": "#/definitions/percent"
              },
              "Proportion microalbiminuria": {
                "$ref": "#/definitions/percent"
              },
              "Proportion macroalbimunuria": {
                "$ref": "#/definitions/percent"
              },
              "Proportion CKD stage 3": {
                "$ref": "#/definitions/percent"
              },
              "Proportion CKD stage 4": {
                "$ref": "#/definitions/percent"
              },
              "Proportion Dialysis": {
                "$ref": "#/definitions/percent"
              },
              "Proportion neuropathy": {
                "$ref": "#/definitions/percent"
              },
              "Proportion foot ulcer": {
                "$ref": "#/definitions/percent"
              },
              "Proportion amputation": {
                "$ref": "#/definitions/percent"
              },
              "Proportion â€¦ coagulation": {
                "$ref": "#/definitions/percent"
              },
              "Proportion blindness": {
                "$ref": "#/definitions/percent"
              }
            }
          }
        }
      }
    },
    "first_disutilities": {
      "title": "Economic Factors",
      "ui:schema": {
        "ui:field_type": "accordion",
        "ui:options": {
          "orderable": false,
          "addable": false
        },
        "items": {
          "ui:options": {
            "header_buttons": {
              "common_text": "Event Disutilities, First",
              "numbered": ""
            }
          },
          "disutilities": {
            "ui:field_type": "grid"
          }
        }
      },
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "disutilities": {
            "title": "Event Disutilities, First",
            "type": "object",
            "properties": {
              "Stroke": {
                "$ref": "#/definitions/positiveInteger"
              },
              "Stroke (mean)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "Stroke (SE)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "Congestive Heart Failure (CHF)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "Congestive Heart Failure (CHF) (mean)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "Congestive Heart Failure (CHF) (SE)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "Myocardial Infaction (MI)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "Myocardial Infaction (MI) (mean)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "Myocardial Infaction (MI) (SE)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "Angina": {
                "$ref": "#/definitions/positiveInteger"
              },
              "Angina (mean)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "Angina (SE)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "Revadscularization surgery": {
                "$ref": "#/definitions/positiveInteger"
              },
              "Revadscularization surgery (mean)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "Revadscularization surgery (SE)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "ESRD": {
                "$ref": "#/definitions/positiveInteger"
              },
              "ESRD (mean)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "ESRD (SE)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "Blindness": {
                "$ref": "#/definitions/positiveInteger"
              },
              "Blindness (mean)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "Blindness (SE)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "Amputation": {
                "$ref": "#/definitions/positiveInteger"
              },
              "Amputation (mean)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "Amputation (SE)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "Dialysis": {
                "$ref": "#/definitions/positiveInteger"
              },
              "Dialysis (mean)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "Dialysis (SE)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "Ulcer": {
                "$ref": "#/definitions/positiveInteger"
              },
              "Ulcer (mean)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "Ulcer (SE)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "egfr_30": {
                "$ref": "#/definitions/positiveInteger"
              },
              "egfr_30 (mean)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "egfr_30 (SE)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "egfr_60": {
                "$ref": "#/definitions/positiveInteger"
              },
              "egfr_60 (mean)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "egfr_60 (SE)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "hypoglycemia_any": {
                "$ref": "#/definitions/positiveInteger"
              },
              "hypoglycemia_any (mean)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "hypoglycemia_any (SE)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "hypoglycemia_medical": {
                "$ref": "#/definitions/positiveInteger"
              },
              "hypoglycemia_medical (mean)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "hypoglycemia_medical (SE)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "laser_retin": {
                "$ref": "#/definitions/positiveInteger"
              },
              "laser_retin (mean)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "laser_retin (SE)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "macroalbuminuria": {
                "$ref": "#/definitions/positiveInteger"
              },
              "macroalbuminuria (mean)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "macroalbuminuria (SE)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "microalbuminuria": {
                "$ref": "#/definitions/positiveInteger"
              },
              "microalbuminuria (mean)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "microalbuminuria (SE)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "neuropathy": {
                "$ref": "#/definitions/positiveInteger"
              },
              "neuropathy (mean)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "neuropathy (SE)": {
                "$ref": "#/definitions/positiveInteger"
              }
            }
          }
        }
      }
    },
    "subsequent_disutilities": {
      "title": "",
      "ui:schema": {
        "ui:field_type": "accordion",
        "ui:options": {
          "orderable": false,
          "addable": false
        },
        "items": {
          "ui:options": {
            "header_buttons": {
              "common_text": "Event Disutilities, Subsequent",
              "numbered": ""
            }
          },
          "disutilities": {
            "ui:field_type": "grid"
          }
        }
      },
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "disutilities": {
            "title": "Event Disutilities, First",
            "type": "object",
            "properties": {
              "Stroke": {
                "$ref": "#/definitions/positiveInteger"
              },
              "Stroke (mean)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "Stroke (SE)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "Congestive Heart Failure (CHF)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "Congestive Heart Failure (CHF) (mean)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "Congestive Heart Failure (CHF) (SE)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "Myocardial Infaction (MI)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "Myocardial Infaction (MI) (mean)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "Myocardial Infaction (MI) (SE)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "Angina": {
                "$ref": "#/definitions/positiveInteger"
              },
              "Angina (mean)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "Angina (SE)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "Revadscularization surgery": {
                "$ref": "#/definitions/positiveInteger"
              },
              "Revadscularization surgery (mean)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "Revadscularization surgery (SE)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "ESRD": {
                "$ref": "#/definitions/positiveInteger"
              },
              "ESRD (mean)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "ESRD (SE)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "Blindness": {
                "$ref": "#/definitions/positiveInteger"
              },
              "Blindness (mean)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "Blindness (SE)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "Amputation": {
                "$ref": "#/definitions/positiveInteger"
              },
              "Amputation (mean)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "Amputation (SE)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "Dialysis": {
                "$ref": "#/definitions/positiveInteger"
              },
              "Dialysis (mean)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "Dialysis (SE)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "Ulcer": {
                "$ref": "#/definitions/positiveInteger"
              },
              "Ulcer (mean)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "Ulcer (SE)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "egfr_30": {
                "$ref": "#/definitions/positiveInteger"
              },
              "egfr_30 (mean)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "egfr_30 (SE)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "egfr_60": {
                "$ref": "#/definitions/positiveInteger"
              },
              "egfr_60 (mean)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "egfr_60 (SE)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "hypoglycemia_any": {
                "$ref": "#/definitions/positiveInteger"
              },
              "hypoglycemia_any (mean)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "hypoglycemia_any (SE)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "hypoglycemia_medical": {
                "$ref": "#/definitions/positiveInteger"
              },
              "hypoglycemia_medical (mean)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "hypoglycemia_medical (SE)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "laser_retin": {
                "$ref": "#/definitions/positiveInteger"
              },
              "laser_retin (mean)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "laser_retin (SE)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "macroalbuminuria": {
                "$ref": "#/definitions/positiveInteger"
              },
              "macroalbuminuria (mean)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "macroalbuminuria (SE)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "microalbuminuria": {
                "$ref": "#/definitions/positiveInteger"
              },
              "microalbuminuria (mean)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "microalbuminuria (SE)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "neuropathy": {
                "$ref": "#/definitions/positiveInteger"
              },
              "neuropathy (mean)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "neuropathy (SE)": {
                "$ref": "#/definitions/positiveInteger"
              }
            }
          }
        }
      }
    },
    "event_cost": {
      "title": "",
      "ui:schema": {
        "ui:field_type": "accordion",
        "ui:options": {
          "orderable": false,
          "addable": false
        },
        "items": {
          "ui:options": {
            "header_buttons": {
              "common_text": "Event Cost",
              "numbered": ""
            }
          },
          "costs": {
            "ui:field_type": "grid"
          }
        }
      },
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "costs": {
            "title": "Event Cost",
            "type": "object",
            "properties": {
              "Stroke": {
                "$ref": "#/definitions/positiveInteger"
              },
              "Congestive Heart Failure (CHF)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "Myocardial Infaction (MI)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "Angina": {
                "$ref": "#/definitions/positiveInteger"
              },
              "Revadscularization surgery": {
                "$ref": "#/definitions/positiveInteger"
              },
              "ESRD": {
                "$ref": "#/definitions/positiveInteger"
              },
              "Blindness": {
                "$ref": "#/definitions/positiveInteger"
              },
              "Amputation": {
                "$ref": "#/definitions/positiveInteger"
              },
              "Dialysis": {
                "$ref": "#/definitions/positiveInteger"
              },
              "Ulcer": {
                "$ref": "#/definitions/positiveInteger"
              },
              "egfr_30": {
                "$ref": "#/definitions/positiveInteger"
              },
              "egfr_60": {
                "$ref": "#/definitions/positiveInteger"
              },
              "hypoglycemia_any": {
                "$ref": "#/definitions/positiveInteger"
              },
              "hypoglycemia_medical": {
                "$ref": "#/definitions/positiveInteger"
              },
              "laser_retin": {
                "$ref": "#/definitions/positiveInteger"
              },
              "macroalbuminuria": {
                "$ref": "#/definitions/positiveInteger"
              },
              "microalbuminuria": {
                "$ref": "#/definitions/positiveInteger"
              },
              "neuropathy": {
                "$ref": "#/definitions/positiveInteger"
              },
              "QALY Discount Rate": {
                "$ref": "#/definitions/positiveInteger"
              },
              "Cost Discount Rate": {
                "$ref": "#/definitions/positiveInteger"
              }
            }
          }
        }
      }
    },
    "maintenance_cost": {
      "title": "",
      "ui:schema": {
        "ui:field_type": "accordion",
        "ui:options": {
          "orderable": false,
          "addable": false
        },
        "items": {
          "ui:options": {
            "header_buttons": {
              "common_text": "Maintenance Cost",
              "numbered": ""
            }
          },
          "costs": {
            "ui:field_type": "grid"
          }
        }
      },
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "costs": {
            "title": "Maintenance Cost",
            "type": "object",
            "properties": {
              "Stroke": {
                "$ref": "#/definitions/positiveInteger"
              },
              "Congestive Heart Failure (CHF)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "Myocardial Infaction (MI)": {
                "$ref": "#/definitions/positiveInteger"
              },
              "Angina": {
                "$ref": "#/definitions/positiveInteger"
              },
              "Revadscularization surgery": {
                "$ref": "#/definitions/positiveInteger"
              },
              "ESRD": {
                "$ref": "#/definitions/positiveInteger"
              },
              "Blindness": {
                "$ref": "#/definitions/positiveInteger"
              },
              "Amputation": {
                "$ref": "#/definitions/positiveInteger"
              },
              "Dialysis": {
                "$ref": "#/definitions/positiveInteger"
              },
              "Ulcer": {
                "$ref": "#/definitions/positiveInteger"
              },
              "egfr_30": {
                "$ref": "#/definitions/positiveInteger"
              },
              "egfr_60": {
                "$ref": "#/definitions/positiveInteger"
              },
              "hypoglycemia_any": {
                "$ref": "#/definitions/positiveInteger"
              },
              "hypoglycemia_medical": {
                "$ref": "#/definitions/positiveInteger"
              },
              "laser_retin": {
                "$ref": "#/definitions/positiveInteger"
              },
              "macroalbuminuria": {
                "$ref": "#/definitions/positiveInteger"
              },
              "microalbuminuria": {
                "$ref": "#/definitions/positiveInteger"
              },
              "neuropathy": {
                "$ref": "#/definitions/positiveInteger"
              },
              "QALY Discount Rate": {
                "$ref": "#/definitions/positiveInteger"
              },
              "Cost Discount Rate": {
                "$ref": "#/definitions/positiveInteger"
              }
            }
          }
        }
      }
    },
    "interventions_or_treatments": {
      "title": "Name of the treatment",
      "description": "",
      "$ref": "#/definitions/string"
    },
    "scenario_name": {
      "title": "Name of the scenario",
      "description": "",
      "$ref": "#/definitions/string"
    },
    "simulation_type": {
      "title": "Type of simulation to run.",
      "description": "",
      "$ref": "#/definitions/string",
      "enum": ["Standard", "Sensitivity Analysis"],
      "default": "Standard"
    },
    "equation_set": {
      "title": "Name of the complication equation set to invoke.",
      "description": "",
      "$ref": "#/definitions/string",
      "enum": ["ukpds", "t1d"],
      "default": "ukpds"
    },
    "intervention_sets": {
      "title": "Number of intervention sets to configure/run (standard simulation).",
      "description": "",
      "$ref": "#/definitions/interventionSetsLength",
      "default": 3
    },
    "baseline_demographics": {
      "title": "Baseline demoraphics (always 1)",
      "description": "",
      "$ref": "#/definitions/interventionSetsLength",
      "default": 1
    },
    "iterations": {
      "title": "Number of iterations for sensitivity analysis.",
      "description": "",
      "$ref": "#/definitions/positiveInteger",
      "default": 1
    },
    "population": {
      "title": "Configurations for population generation.",
      "description": "",
      "type": "object",
      "required": ["size"],
      "properties": {
        "size": {
          "title": "Size",
          "description": "Number of individuals in the population.",
          "$ref": "#/definitions/positiveInteger"
        }
      }
    },
    "time_horizon": {
      "title": "Simulation time horizon configuration.",
      "description": "",
      "type": "object",
      "required": ["strategy", "limit"],
      "ui:schema": {
        "ui:order": ["strategy", "limit"]
      },
      "properties": {
        "strategy": {
          "title": "Time horizon execution strategy. 'fixed' runs for a set duration. 'max_age' runs until the youngest indidual reaches the max age. 'all_deceased' runs until all  agents have passed away.",
          "description": "",
          "$ref": "#/definitions/string",
          "default": "fixed",
          "enum": ["fixed", "max_age", "all_deceased"]
        },
        "limit": {
          "title": "Time step limit. Refers to the maximum number of steps or maximum age, depending on context. Only applied in 'fixed' and 'max_age' strategies",
          "description": "",
          "default": 0,
          "$ref": "#/definitions/positiveInteger"
        }
      }
    },
    "economics": {
      "title": "Cost Effectiveness configurations",
      "description": "",
      "type": "object",
      "ui:schema": {
        "ui:order": ["discount", "cost_strategy", "intervention_cost"]
      },
      "properties": {
        "discount": {
          "title": "Discount factor.",
          "description": "",
          "$ref": "#/definitions/percent",
          "default": 3
        },
        "cost_strategy": {
          "title": "Cost calculation strategy.",
          "description": "",
          "$ref": "#/definitions/string",
          "default": "ADDITIVE",
          "enum": ["ADDITIVE", "MULTIPLICATIVE"]
        },
        "intervention_cost": {
          "title": "Cost of an intervention.",
          "description": "",
          "$ref": "#/definitions/positiveInteger",
          "default": 0
        }
      }
    },
    "intervention_sets_ukpds": {
      "title": "UKPDS",
      "ui:schema": {
        "ui:field_type": "accordion",
        "ui:options": {
          "orderable": false,
          "addable": false
        },
        "items": {
          "ui:options": {
            "header_buttons": {
              "common_text": "Intervention Set",
              "numbered": true
            }
          },
          "risk_reductions": {
            "ui:field_type": "grid"
          },
          "factor_changes": {
            "ui:field_type": "grid"
          }
        }
      },
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "intervention_set_name": {
            "title": "Intervention Set Name",
            "type": "string"
          },
          "risk_reductions": {
            "title": "UKPDS specific complication risk reductions.",
            "description": "",
            "type": "object",
            "properties": {
              "blindness": {
                "title": "Decrease risk of blindness.",
                "description": "",
                "$ref": "#/definitions/percent"
              },
              "first_amputation": {
                "title": "Decrease risk of first amputation.",
                "description": "",
                "$ref": "#/definitions/percent"
              },
              "first_chf": {
                "title": "Decrease risk of first congestive heart failure",
                "description": "",
                "$ref": "#/definitions/percent"
              },
              "first_ihd": {
                "title": "Decrease risk of first ischemic heart disease event.",
                "description": "",
                "$ref": "#/definitions/percent"
              },
              "first_mi": {
                "title": "Decrease risk of first myocardial infacrtion.",
                "description": "",
                "$ref": "#/definitions/percent"
              },
              "first_stroke": {
                "title": "Decrease risk of first stroke.",
                "description": "",
                "$ref": "#/definitions/percent"
              },
              "renal_failure": {
                "title": "Decrease risk of renal failure.",
                "description": "",
                "$ref": "#/definitions/percent"
              },
              "second_amputation": {
                "title": "Decrease risk of second amputation.",
                "description": "",
                "$ref": "#/definitions/percent"
              },
              "second_mi": {
                "title": "Decrease risk of second myocardial infacrtion.",
                "description": "",
                "$ref": "#/definitions/percent"
              },
              "second_stroke": {
                "title": "Decrease risk of second stroke.",
                "description": "",
                "$ref": "#/definitions/percent"
              },
              "ulcer": {
                "title": "Decrease risk of ulcers.",
                "description": "",
                "$ref": "#/definitions/percent"
              }
            }
          },
          "factor_changes": {
            "description": "UKPDS specific risk factor adjustments",
            "type": "object",
            "properties": {
              "smoker": {
                "title": "Change population smoking characteristics.",
                "description": "",
                "type": "number"
              },
              "mmalb": {
                "title": "Change population microalbuminuria characteristics.",
                "description": "",
                "type": "number"
              },
              "pvd": {
                "title": "Change population peripheral vascular disease characteristics.",
                "description": "",
                "type": "number"
              },
              "bmi": {
                "title": "Change population BMI characteristics.",
                "description": "",
                "type": "number"
              },
              "hr": {
                "title": "Change population heart rate characteristics.",
                "description": "",
                "type": "number"
              },
              "hdl": {
                "title": "Change population HDL characteristics.",
                "description": "",
                "type": "number"
              },
              "ldl": {
                "title": "Change population LDL characteristics.",
                "description": "",
                "type": "number"
              },
              "sbp": {
                "title": "Change population systolic blood pressure characteristics.",
                "description": "",
                "type": "number"
              },
              "wbc": {
                "title": "Change population white blood cell characteristics.",
                "description": "",
                "type": "number"
              },
              "hba1c": {
                "title": "Change population HbA1c characteristics.",
                "description": "",
                "type": "number"
              },
              "haem": {
                "title": "Change population haemoglobin characteristics.",
                "description": "",
                "type": "number"
              },
              "egfr": {
                "title": "Change population eGFR characteristics.",
                "description": "",
                "type": "number"
              }
            }
          }
        }
      }
    },
    "intervention_sets_t1d": {
      "title": "T1D",
      "ui:schema": {
        "ui:field_type": "accordion",
        "ui:options": {
          "orderable": false,
          "addable": false
        },
        "items": {
          "ui:options": {
            "header_buttons": {
              "common_text": "Intervention Set",
              "numbered": true
            }
          },
          "risk_reductions": {
            "ui:field_type": "grid"
          },
          "factor_changes": {
            "ui:field_type": "grid"
          }
        }
      },
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "intervention_set_name": {
            "title": "Intervention set name",
            "type": "string",
            "default": "initial default"
          },
          "risk_reductions": {
            "title": "Risk Reductions",
            "type": "object",
            "properties": {
              "amputation": {
                "description": "Decrease risk of amputation.",
                "$ref": "#/definitions/percent"
              },
              "cvd": {
                "description": "Decrease risk of cardiovascular disease.",
                "$ref": "#/definitions/percent"
              },
              "dka": {
                "description": "Decrease risk of diabetic ketoacidosis.",
                "$ref": "#/definitions/percent"
              },
              "dpn": {
                "description": "Decrease risk of dermatosis papulosa nigra.",
                "$ref": "#/definitions/percent"
              },
              "esrd": {
                "description": "Decrease risk of end-stage renal disease.",
                "$ref": "#/definitions/percent"
              },
              "gfr": {
                "description": "Decrease risk of GFR.",
                "$ref": "#/definitions/percent"
              },
              "hypoglycemia": {
                "description": "Decrease risk of hypoglycemia.",
                "$ref": "#/definitions/percent"
              },
              "macroalbuminuria": {
                "description": "Decrease risk of macroalbuminuria.",
                "$ref": "#/definitions/percent"
              },
              "microalbuminuria": {
                "description": "Decrease risk of microalbuminuria.",
                "$ref": "#/definitions/percent"
              },
              "npdr": {
                "description": "Decrease risk of nonproliferative diabetic retinopathy.",
                "$ref": "#/definitions/percent"
              },
              "pdr": {
                "description": "Decrease risk of proliferative diabetic retinopathy.",
                "$ref": "#/definitions/percent"
              },
              "csme": {
                "description": "Decrease risk of clinically significant macular edema.",
                "$ref": "#/definitions/percent"
              },
              "ulcer": {
                "description": "Decrease risk of ulcers.",
                "$ref": "#/definitions/percent"
              }
            }
          },
          "factor_changes": {
            "title": "Factor Changes",
            "type": "object",
            "properties": {
              "bmi": {
                "title": "Change population BMI characteristics.",
                "description": "",
                "type": "number"
              },
              "dbp": {
                "title": "Change population diastolic blood pressure characteristics.",
                "description": "",
                "type": "number"
              },
              "sbp": {
                "title": "Change population systolic blood pressure characteristics.",
                "description": "",
                "type": "number"
              },
              "hba1c": {
                "title": "Change population HbA1c characteristics.",
                "description": "",
                "type": "number"
              },
              "hdl": {
                "title": "Change population HDL characteristics.",
                "description": "",
                "type": "number"
              },
              "ldl": {
                "title": "Change population LDL characteristics.",
                "description": "",
                "type": "number"
              },
              "hr": {
                "title": "Change population heart rate characteristics.",
                "description": "",
                "type": "number"
              },
              "smoker": {
                "title": "Change population smoking characteristics.",
                "description": "",
                "type": "number"
              },
              "insulin_dose": {
                "title": "Change population insulin dose characteristics.",
                "description": "",
                "type": "number"
              },
              "trig": {
                "title": "Change population triglyceride characteristics.",
                "description": "",
                "type": "number"
              }
            }
          }
        }
      }
    },
    "sensitivity_analysis_ukpds": {
      "title": "UKPDS",
      "description": "Configurations for Probabilitic Sensitivity Analysis.",
      "type": "object",
      "ui:schema": {
        "ui:order": ["risk_reductions", "factor_changes"],
        "risk_reductions": {
          "ui:widget": "checkboxes",
          "items": {
            "ui:field_type": "grid"
          }
        },
        "factor_changes": {
          "ui:widget": "checkboxes"
        }
      },
      "properties": {
        "risk_reductions": {
          "title": "Array of risk reductions variables to sample randomly.",
          "description": "",
          "type": "array",
          "uniqueItems": true,
          "items": {
            "type": "string",
            "enum": [
              "blindness",
              "first_amputation",
              "first_chf",
              "first_ihd",
              "first_mi",
              "first_stroke",
              "renal_failure",
              "second_amputation",
              "second_mi",
              "second_stroke",
              "ulcer"
            ]
          }
        },
        "factor_changes": {
          "title": "Array of risk factor variables to sample randomly.",
          "description": "",
          "type": "array",
          "uniqueItems": true,
          "items": {
            "type": "string",
            "enum": [
              "smoker",
              "mmalb",
              "pvd",
              "bmi",
              "hr",
              "hdl",
              "ldl",
              "sbp",
              "wbc",
              "hba1c",
              "haem",
              "egfr",
              "atfib"
            ]
          }
        } 
      }
    },
    "sensitivity_analysis_t1d": {
      "title": "Configurations for Probabilitic Sensitivity Analysis.",
      "description": "",
      "type": "object",
      "ui:schema": {
        "ui:order": ["risk_reductions", "factor_changes"],
        "risk_reductions": {
          "ui:widget": "checkboxes"
        },
        "factor_changes": {
          "ui:widget": "checkboxes"
        }
      },
      "properties": {
        "risk_reductions": {
          "title": "Array of risk reductions variables to sample randomly.",
          "description": "",
          "type": "array",
          "uniqueItems": true,
          "items": {
            "type": "string",
            "enum": [
              "amputation",
              "csme",
              "cvd",
              "dka",
              "dpn",
              "esrd",
              "gfr",
              "hypoglycemia",
              "macroalbuminuria",
              "microalbuminuria",
              "npdr",
              "pdr",
              "ulcer"
            ]
          }
        },
        "factor_changes": {
          "title": "Array of risk factor variables to sample randomly.",
          "description": "",
          "type": "array",
          "uniqueItems": true,
          "items": {
            "type": "string",
            "enum": [
              "bmi",
              "dbp",
              "sbp",
              "hba1c",
              "hdl",
              "ldl",
              "hr",
              "smoker",
              "insulin_dose",
              "trig"
            ]
          }
        }
      }
    }
  },
  "definitions": {
    "string": {
      "description": "String with a minimum length of 1 (i.e. excludes '')",
      "type": "string",
      "minLength": 1
    },
    "positiveInteger": {
      "description": "Integer greater than or equal to zero",
      "type": "integer",
      "minimum": 0
    },
    "interventionSetsLength": {
      "description": "Integer greater than zero and less than the maximum allowable number of intervention sets",
      "type": "integer",
      "minimum": 1,
      "maximum": 10
    },
    "percent": {
      "description": "Decimal representation of a percentage",
      "type": "number",
      "minimum": 0,
      "maximum": 100
    }
  }
}

